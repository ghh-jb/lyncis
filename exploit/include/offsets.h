#ifndef offsets_h
#define offsets_h

#include <stdio.h>

#include "common.h"

typedef struct {
    struct {
        int vm_map;
        int next;
        int prev;
        int itk_self;
        int itk_space;
        int bsd_info;
        int flags;
    } task;
    struct {
        int io_bits;
        int io_references;
        int ip_receiver;
        int ip_kobject;
        int ip_srights;
    } ipc_port;
    struct {
        int pid;
        int ucred;
        int cs_flags;
        int p_fd;
    } proc;
    struct {
        int is_table;
    } ipc_space;
    struct {
        int size;
    } ipc_entry;
    struct {
        int fd_ofiles;
    } file_desc;
    struct {
        int f_fglob;
    } file_proc;
    struct {
        int fg_data;
    } file_glob;
    struct {
        int buffer;
    } pipe;
} offsets_t;

#define koffsetof(struct, entry) offsets->struct.entry
extern offsets_t *offsets;
void init_device_offsets(void);

#endif /* offsets_h */

